<!DOCTYPE html>
<html lang="pt-br">
  
<head>
    <meta charset="UTF-8">
    <title>Consulta Aluno</title>
    <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>
  
    <link rel="stylesheet" href=
"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity=
"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
        crossorigin="anonymous">
    <style>
        table {
            width: 30%;
            margin: auto;
        }
        td, th {
        }
        h1 {
            text-align:center;
        }
    </style>

</head>
  
<body>


    <div>
        <h1>Consulta Aluno: </h1>
    </div>

    <div class="form-group">
        <label for="exampleFormControlInput1">
            Nome do Aluno
        </label>

        <input type="text" required class="form-control"
               id="nome" placeholder="Nome do Aluno" autofocus>
    </div>

    <button type="submit" onclick="submit()" class="btn btn-primary"
            style="margin-left: 15px; margin-top: 10px;
				width: 50%; height:auto;">
        Pesquisar
    </button><br><br>

    <div>
        <h1>Dados do Aluno: </h1>
    </div>

    <div id="div_lista"></div>


    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js">
    </script>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyDrpMrYarxw1LSVBdrb7ATIP0AY6c7bXGw",
            authDomain: "adce-ep.firebaseapp.com",
            databaseURL: "https://adce-ep-default-rtdb.firebaseio.com",
            projectId: "adce-ep",
            storageBucket: "adce-ep.appspot.com",
            messagingSenderId: "193624687904",
            appId: "1:193624687904:web:d30ad2ea44e3533edc8345",
            measurementId: "G-0VH40VDXPT"
        };

        firebase.initializeApp(firebaseConfig);

        function getInputVal(id) {
            return document.getElementById(id).value;
        }

        function submit() {

            var nome = getInputVal('nome');

            var var_lista = document.getElementById("div_lista");


            let usersRef = firebase.database().ref('Alunos');
            usersRef.orderByChild('nome').equalTo(nome).on("value", function (snapshot) {


                console.log(snapshot.val());
                snapshot.forEach(function (childSnapshot) {
                    const alunoKey = childSnapshot.key;
                    const alunoNome = childSnapshot.val().nome;
                    const alunoTel = childSnapshot.val().telefone;
                    console.log(alunoKey);

                    var_lista.innerHTML = alunoKey + "Nome:" + alunoNome + "Telefone:" + alunoTel;
                    //console.log(data.nome);
                    //console.log(data.);
                });
            });
        }


    </script>

</body>
  
</html>